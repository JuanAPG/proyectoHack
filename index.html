<!doctype html>
<html lang="en" data-bs-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CrewHub - Leader & Crew</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

</head>
<body>
<div class="container py-4">

  <div class="d-flex justify-content-between align-items-center mb-3">
        <img src="https://cdn.cookielaw.org/logos/9a3365cc-3965-4e9f-b352-94c317b6fafe/1fadf2c5-d63a-45c3-b947-c823ecbed0c6/09da9c3d-b5e7-4472-ad10-fcc50494632e/gategroup_Logo_White_RGB_PNG(4).png"/>
    <h1 class="h4 mb-0">Task Manager</h1>
    <div class="d-flex gap-2">
      <button class="btn btn-outline-secondary btn-sm" id="btnSeed">Reset demo</button>
    </div>
  </div>

  <!-- Tabs -->
  <ul class="nav nav-tabs mb-3" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#leader" type="button" role="tab">Leader View</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#worker" type="button" role="tab">Crew View</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#operator" type="button" role="tab">Operator Mode</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" data-bs-toggle="tab" data-bs-target="#trolley_set" type="button" role="tab">Trolley Set</button>
    </li>
  </ul>

  <div class="tab-content">

    <!-- ===================== LEADER ===================== -->
    <div class="tab-pane fade show active" id="leader" role="tabpanel">
      <div class="row g-4">

        <!-- Controls -->
        <div class="col-12">
          <div class="card">
            <div class="card-body row g-3 align-items-center">
              <div class="col-md-4">
                <label class="form-label mb-1"><strong>α</strong> weight: Priority vs Load</label>
                <input type="range" class="form-range" id="alpha" min="0" max="1" step="0.05" value="0.6">
                <div class="small text-muted">0 = balance by load - 1 = pure priority</div>
              </div>
              <div class="col-md-4">
                <label class="form-label mb-1">Anti-repetition window (last N tasks)</label>
                <input type="number" id="varWindow" class="form-control" value="3" min="1" max="10">
              </div>
              <div class="col-md-4">
                <label class="form-label mb-1">Max concurrent tasks per crew</label>
                <input type="number" id="maxTasks" class="form-control" value="3" min="1" max="8">
              </div>
            </div>
          </div>
        </div>

        <!-- Employees -->
        <div class="col-lg-4">
          <div class="card h-100">
            <div class="card-header bg-white">
              <h5 class="mb-0">Teams & Crew</h5>
              <small class="text-muted">Current load & recent variety</small>
            </div>
            <div class="card-body" id="empList"></div>
          </div>
        </div>

        <!-- Backlog -->
        <div class="col-lg-4">
          <div class="card h-100">
            <div class="card-header bg-white d-flex justify-content-between align-items-center">
              <div>
                <h5 class="mb-0">Task backlog</h5>
                <small class="text-muted">Priority, effort & category</small>
              </div>
              <div>
                <button class="btn btn-sm btn-outline-secondary me-2" id="btnAddTask" data-bs-toggle="modal" data-bs-target="#addTaskModal">+ Task</button>
                <button class="btn btn-sm btn-outline-danger" id="btnClearDone">Clear done</button>
              </div>
            </div>
            <div class="list-group list-group-flush" id="taskList"></div>
          </div>
        </div>

        <!-- Suggestions + Issues -->
        <div class="col-lg-4">
          <div class="card h-100 suggested mb-4">
            <div class="card-header bg-white">
              <h5 class="mb-0">System suggestion</h5>
              <small class="text-muted">Best (task → crew) for variety and load</small>
            </div>
            <div class="card-body">
              <div id="suggBox" class="mb-3 text-muted">Click “Suggest next”.</div>
              <div class="d-grid gap-2">
                <button class="btn btn-primary" id="btnSuggest">Suggest next</button>
                <button class="btn btn-success" id="btnAssign">Assign suggestion</button>
                <button class="btn btn-outline-primary" id="btnAuto">Auto-assign (demo)</button>
              </div>
            </div>
          </div>

          <div class="card h-100">
            <div class="card-header bg-white">
              <h5 class="mb-0">Reported issues</h5>
              <small class="text-muted">Crew needing support</small>
            </div>
            <div class="list-group list-group-flush" id="issuesList">
              <div class="list-group-item text-muted">No issues yet.</div>
            </div>
          </div>

          <div class="card h-100 mt-4">
            <div class="card-header bg-white">
              <h5 class="mb-0">Incidencias Operator Mode</h5>
              <small class="text-muted">Reportes desde la vista operativa</small>
            </div>
            <div class="list-group list-group-flush" id="operatorIncidentList">
              <div class="list-group-item text-muted">Sin incidencias registradas.</div>
            </div>
          </div>
        </div>

      </div>

      <!-- Operator completion log -->
      <div class="row g-4 mt-0">
        <div class="col-12">
          <div class="card">
            <div class="card-header bg-white">
              <h5 class="mb-0">Registros de tareas completadas</h5>
              <small class="text-muted">Seguimiento en tiempo real desde Operator Mode</small>
            </div>
            <div class="card-body p-0">
              <div class="list-group list-group-flush" id="operatorCompletionList">
                <div class="list-group-item text-muted">Sin carritos registrados todavia.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===================== CREW ===================== -->
    <div class="tab-pane fade" id="worker" role="tabpanel">
      <div class="row g-4">

        <!-- Crew selector -->
        <div class="col-12">
          <div class="card">
            <div class="card-body row g-3 align-items-center">
              <div class="col-md-5">
                <label class="form-label mb-1">I am</label>
                <select id="workerSelect" class="form-select"></select>
              </div>
              <div class="col-md-7">
                <div class="d-flex gap-3 align-items-center">
                  <div class="badge text-bg-success badge-large" id="pointsBadge">0 pts</div>
                  <div id="badgesBox" class="d-flex flex-wrap gap-2"></div>
                </div>
                <div class="small text-muted mt-2" id="varietyHint">Variety: 0 categories this week.</div>
                <div class="mt-2">
                  <span class="fw-semibold">Featured achievements:</span>
                  <span id="achievementsBox" class="ms-2 text-muted">--</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- My tasks -->
        <div class="col-lg-7">
          <div class="card h-100">
            <div class="card-header bg-white">
              <h5 class="mb-0">My assigned tasks</h5>
              <small class="text-muted">Mark done or report an issue</small>
            </div>
            <div class="p-3" id="myTasks"></div>
          </div>
        </div>

        <!-- Gamification / Progress -->
        <div class="col-lg-5">
          <div class="card h-100">
            <div class="card-header bg-white">
              <h5 class="mb-0">Achievements</h5>
              <small class="text-muted">Streak, diversity & badges</small>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <div class="fw-semibold">Productivity streak</div>
                <div class="progress" role="progressbar" aria-label="Streak">
                  <div class="progress-bar" id="streakBar" style="width:0%">0/5</div>
                </div>
                <div class="small text-muted mt-1">Complete ≥3 tasks/day to progress the 5-day streak.</div>
              </div>
              <div>
                <div class="fw-semibold">Task diversity</div>
                <div id="diversityCats" class="d-flex flex-wrap gap-2 mt-1"></div>
                <div class="small text-muted">Earn <em>“All-Rounder”</em> by completing 3+ distinct categories in a day.</div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- ===================== OPERATOR ===================== -->
    <div class="tab-pane fade" id="operator" role="tabpanel">
      <!-- Bloque: Contenedor principal de la experiencia operativa -->
      <div class="row g-3">

        <!-- Bloque: Encabezado con acciones iniciales -->
        <div class="col-12">
          <div class="card">
            <div class="card-body d-flex flex-column flex-lg-row gap-3 align-items-start justify-content-between">
              <div>
                <div class="text-uppercase small fw-semibold text-primary">CrewHub - Operator Mode</div>
                <h2 class="h4 mb-2">Smart Execution (Pick &amp; Pack)</h2>
                <p class="small mb-3 text-muted">CrewHub Operator Mode convierte el proceso de Pick &amp; Pack en una experiencia digital guiada, que mejora la eficiencia del trabajador, detecta errores en tiempo real y estandariza decisiones criticas como el manejo de botellas de alcohol, todo desde una interfaz intuitiva y movil.</p>
                <div class="d-flex flex-wrap gap-2">
                  <span class="badge text-bg-light text-primary" id="operatorStatusBadge">Sin carrito activo</span>
                  <span class="badge text-bg-success" id="operatorStartTimeBadge" hidden>Inicio --</span>
                </div>
              </div>
              <div class="d-flex flex-column flex-sm-row flex-lg-column align-items-stretch gap-2 w-100 w-lg-auto">
                <button class="btn btn-primary" id="scanCartBtn">Escanear Carrito QR</button>
                <button class="btn btn-outline-secondary" id="resetOperatorDataBtn">Reiniciar datos</button>
              </div>
            </div>
            <div class="card-footer bg-transparent border-0 pt-0">
              <dl class="row small mb-0" id="cartMeta">
                <dt class="col-5 col-md-3">Carrito</dt><dd class="col-7 col-md-3 text-muted">--</dd>
                <dt class="col-5 col-md-3">Vuelo</dt><dd class="col-7 col-md-3 text-muted">--</dd>
                <dt class="col-5 col-md-3">Operador</dt><dd class="col-7 col-md-3 text-muted">--</dd>
                <dt class="col-5 col-md-3">Productos</dt><dd class="col-7 col-md-3 text-muted">--</dd>
              </dl>
            </div>
          </div>
        </div>

        <!-- Bloque: Checklist operativo y progreso -->
        <div class="col-12 col-lg-7">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">Checklist operativo</h5>
              <small class="text-muted">Escanea y marca los productos siguiendo la secuencia sugerida.</small>
            </div>
            <div class="card-body">
              <div class="d-flex flex-wrap align-items-center gap-4 mb-3">
                <div>
                  <div class="small text-muted text-uppercase">Tiempo transcurrido</div>
                  <div class="fw-semibold fs-5" id="operatorTimer">00:00</div>
                </div>
                <div class="flex-grow-1">
                  <div class="small text-muted text-uppercase mb-1">Progreso</div>
                  <div class="progress">
                    <div class="progress-bar" id="operatorProgressBar" style="width:0%">0%</div>
                  </div>
                </div>
                <div>
                  <div class="small text-muted text-uppercase">Completados</div>
                  <div class="fw-semibold" id="operatorCompletedCounter">0/0</div>
                </div>
              </div>
              <div id="productChecklist" class="vstack gap-3">
                <div class="alert alert-info small mb-0" role="alert">Escanea un carrito para comenzar.</div>
              </div>
            </div>
          </div>

          <div class="card mt-3" id="operatorSummaryCard" hidden>
            <div class="card-header">
              <h5 class="mb-0">Resumen de cierre</h5>
              <small class="text-muted">Tiempo total, eficiencia y proximos pasos.</small>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Tiempo total</div>
                  <div class="fw-semibold" id="summaryTotalTime">--</div>
                </div>
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Errores</div>
                  <div class="fw-semibold text-danger" id="summaryErrors">0</div>
                </div>
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Tareas</div>
                  <div class="fw-semibold" id="summaryTasks">0/0</div>
                </div>
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Eficiencia</div>
                  <div class="fw-semibold text-success" id="summaryEfficiency">0%</div>
                </div>
              </div>
              <div class="mt-3">
                <button class="btn btn-success me-2" id="newCartBtn">Nuevo carrito</button>
                <button class="btn btn-outline-primary" id="viewJournalBtn">Ver bitacora</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Bloque: Alertas, control de botellas y datos persistidos -->
        <div class="col-12 col-lg-5">
          <div class="card h-100">
            <div class="card-header">
              <h5 class="mb-0">Alertas y bitacora</h5>
              <small class="text-muted">Trazabilidad minuto a minuto.</small>
            </div>
            <div class="card-body">
              <div id="operatorAlert" class="alert alert-secondary" role="alert">Sin actividad. Escanea un carrito para iniciar.</div>
              <ul class="list-group list-group-flush small mt-3" id="operatorJournal">
                <li class="list-group-item text-muted">La bitacora se completara en tiempo real.</li>
              </ul>
            </div>
          </div>

          <div class="card mt-3" id="bottleModuleCard" hidden>
            <div class="card-header">
              <h5 class="mb-0">Control de botellas</h5>
              <small class="text-muted">Validacion automatica de sellos y niveles.</small>
            </div>
            <div class="card-body">
              <div class="row g-3" id="bottleList"></div>
              <div class="mt-3 small">
                <div class="text-muted text-uppercase">Resumen</div>
                <div id="bottleSummary">Escanea un carrito con botellas para desbloquear el analisis.</div>
              </div>
            </div>
          </div>

          <div class="card mt-3">
            <div class="card-header">
              <h5 class="mb-0">Datos guardados</h5>
              <small class="text-muted">Promedios y ultimos registros.</small>
            </div>
            <div class="card-body">
              <div class="small text-muted">Ultimo carrito</div>
              <div class="fw-semibold mb-2" id="storageLastCart">--</div>
              <div class="small text-muted">Tiempo promedio por tarea</div>
              <div class="fw-semibold mb-2" id="storageAvgTask">--</div>
              <div class="small text-muted">Errores históricos</div>
              <div class="fw-semibold" id="storageErrors">--</div>
            </div>
          </div>
        </div>
      </div>

      <button class="btn btn-warning operator-floating-btn" id="reportIssueBtn">Reportar problema</button>
    </div>

     <!-- ===================== TROLLEY SET ===================== -->
    <div class="tab-pane fade" id="trolley_set" role="tabpanel">
      <div class="row g-3">
        <div class="col-12">
          <div class="card">
            <div class="card-body d-flex flex-column flex-lg-row gap-3 align-items-start justify-content-between">
              <div>
                <div class="text-uppercase small fw-semibold text-primary">Trolley Set</div>
                <h2 class="h4 mb-2">Simulador de escaneo QR</h2>
                <p class="small mb-3 text-muted">Simula el escaneo de un QR para cargar un trolley demo con productos ordenados y reglas de botella.</p>
                <div class="d-flex flex-wrap gap-2">
                  <span class="badge text-bg-light text-primary" id="trolleyStatusBadge">Sin carrito activo</span>
                  <span class="badge text-bg-success" id="trolleyStartBadge" hidden>Inicio --</span>
                </div>
              </div>
              <div class="d-flex flex-column flex-sm-row flex-lg-column align-items-stretch gap-2 w-100 w-lg-auto">
                <button class="btn btn-primary" id="trolleyScanBtn">Escanear Carrito QR</button>
                <button class="btn btn-outline-secondary" id="trolleyResetBtn">Reiniciar datos</button>
              </div>
            </div>
            <div class="card-footer bg-transparent border-0 pt-0">
              <dl class="row small mb-0" id="trolleyCartMeta">
                <dt class="col-5 col-md-3">Carrito</dt><dd class="col-7 col-md-3 text-muted">--</dd>
                <dt class="col-5 col-md-3">Vuelo</dt><dd class="col-7 col-md-3 text-muted">--</dd>
                <dt class="col-5 col-md-3">Operador</dt><dd class="col-7 col-md-3 text-muted">--</dd>
                <dt class="col-5 col-md-3">Productos</dt><dd class="col-7 col-md-3 text-muted">--</dd>
              </dl>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-7">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">Checklist operativo</h5>
              <small class="text-muted">Escanea y marca siguiendo la secuencia sugerida.</small>
            </div>
            <div class="card-body">
              <div class="d-flex flex-wrap align-items-center gap-4 mb-3">
                <div>
                  <div class="small text-muted text-uppercase">Tiempo transcurrido</div>
                  <div class="fw-semibold fs-5" id="trolleyTimer">00:00</div>
                </div>
                <div class="flex-grow-1">
                  <div class="small text-muted text-uppercase mb-1">Progreso</div>
                  <div class="progress">
                    <div class="progress-bar" id="trolleyProgressBar" style="width:0%">0%</div>
                  </div>
                </div>
                <div>
                  <div class="small text-muted text-uppercase">Completados</div>
                  <div class="fw-semibold" id="trolleyCompletedCounter">0/0</div>
                </div>
              </div>
              <div id="trolleyProductChecklist" class="vstack gap-3">
                <div class="alert alert-info small mb-0" role="alert">Escanea un carrito para comenzar.</div>
              </div>
            </div>
          </div>

          <div class="card mt-3" id="trolleySummaryCard" hidden>
            <div class="card-header">
              <h5 class="mb-0">Resumen de cierre</h5>
              <small class="text-muted">Tiempo total, eficiencia y proximos pasos.</small>
            </div>
            <div class="card-body">
              <div class="row g-3">
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Tiempo total</div>
                  <div class="fw-semibold" id="trolleySummaryTotalTime">--</div>
                </div>
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Errores</div>
                  <div class="fw-semibold text-danger" id="trolleySummaryErrors">0</div>
                </div>
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Tareas</div>
                  <div class="fw-semibold" id="trolleySummaryTasks">0/0</div>
                </div>
                <div class="col-6">
                  <div class="small text-muted text-uppercase">Eficiencia</div>
                  <div class="fw-semibold text-success" id="trolleySummaryEfficiency">0%</div>
                </div>
              </div>
              <div class="mt-3">
                <button class="btn btn-success me-2" id="trolleyNewScanBtn">Nuevo carrito</button>
                <button class="btn btn-outline-primary" id="trolleyViewJournalBtn">Ver bitacora</button>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12 col-lg-5">
          <div class="card h-100">
            <div class="card-header">
              <h5 class="mb-0">Alertas y bitacora</h5>
              <small class="text-muted">Trazabilidad minuto a minuto.</small>
            </div>
            <div class="card-body">
              <div id="trolleyAlert" class="alert alert-secondary" role="alert">Sin actividad. Escanea un carrito para iniciar.</div>
              <ul class="list-group list-group-flush small mt-3" id="trolleyJournal">
                <li class="list-group-item text-muted">La bitacora se completara en tiempo real.</li>
              </ul>
            </div>
          </div>

          <div class="card mt-3" id="trolleyBottleModuleCard" hidden>
            <div class="card-header">
              <h5 class="mb-0">Control de botellas</h5>
              <small class="text-muted">Validacion automatica de sellos y niveles.</small>
            </div>
            <div class="card-body">
              <div class="row g-3" id="trolleyBottleList"></div>
              <div class="mt-3 small">
                <div class="text-muted text-uppercase">Resumen</div>
                <div id="trolleyBottleSummary">Escanea un carrito con botellas para desbloquear el analisis.</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button class="btn btn-warning trolley-floating-btn" id="trolleyIncidentBtn">Reportar problema</button>
    </div>

  </div>
</div>

<!-- Modal: Add task -->
<div class="modal fade" id="addTaskModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" id="addTaskForm">
      <div class="modal-header">
        <h5 class="modal-title">New task</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Title</label>
          <input type="text" class="form-control" id="fTitle" required placeholder="e.g., Trolley LX721">
        </div>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Required role</label>
            <select id="fRole" class="form-select" required>
              <option>Operator</option>
              <option>Support</option>
              <option>Leader</option>
            </select>
          </div>
          <div class="col-md-3">
            <label class="form-label">Priority (1–5)</label>
            <input type="number" id="fPriority" class="form-control" min="1" max="5" value="3" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">Effort (1–3)</label>
            <input type="number" id="fEffort" class="form-control" min="1" max="3" value="1" required>
          </div>
        </div>
        <div class="mt-3">
          <label class="form-label">Category</label>
          <select id="fCategory" class="form-select" required>
            <option>Beverages</option>
            <option>Service</option>
            <option>Food</option>
            <option>QC</option>
          </select>
        </div>
        <div class="mt-3">
          <label class="form-label">Notes (optional)</label>
          <textarea id="fNotes" class="form-control" rows="2" placeholder="Additional details..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Cancel</button>
        <button class="btn btn-primary" type="submit">Add</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal: Assign task (TEAM -> checklist of crew) -->
<div class="modal fade" id="assignModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <form class="modal-content" id="assignForm">
      <div class="modal-header">
        <h5 class="modal-title">Assign task</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="assignTaskId">
        <div class="mb-2">
          <div class="fw-semibold" id="assignTaskTitle">--</div>
          <div class="small text-muted" id="assignTaskMeta">Required role - Priority - Effort - Category</div>
        </div>

        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">Team</label>
            <select id="assignTeam" class="form-select"></select>
            <div class="form-text">Pick a team to filter eligible crew.</div>
          </div>
          <div class="col-md-8">
            <label class="form-label d-flex justify-content-between align-items-center">
              <span>Select crew (checklist)</span>
              <span class="small text-muted" id="assignHint">0 selected</span>
            </label>
            <div class="input-group mb-2">
              <span class="input-group-text">Search</span>
              <input type="text" id="assignSearch" class="form-control" placeholder="Type a name...">
              <button class="btn btn-outline-secondary" type="button" id="assignSelectAll">Select all</button>
            </div>
            <div id="assignChecklist" class="assign-checklist"></div>
            <div class="form-text">Only crew with the required role for this task are shown.</div>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Cancel</button>
        <button class="btn btn-success" type="submit">Assign</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal: Report issue -->
<div class="modal fade" id="issueModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" id="issueForm">
      <div class="modal-header">
        <h5 class="modal-title">Report an issue</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="hidden" id="issueTaskId">
        <div class="mb-3">
          <label class="form-label">Describe the problem</label>
          <textarea id="issueText" class="form-control" rows="3" required placeholder="e.g., Missing supply / equipment block / spec doubt"></textarea>
        </div>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Severity</label>
            <select id="issueSeverity" class="form-select">
              <option value="medium">Medium</option>
              <option value="high">High</option>
              <option value="low">Low</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Needs leader support?</label>
            <select id="issueNeedHelp" class="form-select">
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </div>
        </div>
        <div class="mt-3 small text-muted">This will notify the leader's issues panel.</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Cancel</button>
        <button class="btn btn-danger" type="submit">Send</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal: Reportar incidencia operativa -->
<div class="modal fade" id="operatorIncidentModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <form class="modal-content" id="operatorIncidentForm">
      <div class="modal-header">
        <h5 class="modal-title">Reportar problema</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Que ocurrio?</label>
          <textarea id="operatorIncidentText" class="form-control" rows="3" required placeholder="Describe brevemente la incidencia..."></textarea>
        </div>
        <div class="mb-3">
          <label class="form-label">Tipo de incidente</label>
          <select id="operatorIncidentType" class="form-select">
            <option value="abastecimiento">Abastecimiento</option>
            <option value="equipo">Equipo</option>
            <option value="calidad">Calidad</option>
            <option value="operativo">Operativo</option>
          </select>
        </div>
        <div class="small text-muted">La incidencia se registrará en la bitacora con fecha y hora exactas.</div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline-secondary" data-bs-dismiss="modal" type="button">Cancelar</button>
        <button class="btn btn-warning" type="submit">Incidencia registrada</button>
      </div>
    </form>
  </div>
</div>

<!-- Toasts -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080">
  <div id="toast" class="toast align-items-center text-bg-primary border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body" id="toastMsg">Notification</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/script.js">
</script>
</body>
</html>
